version: '3.8'

services:
  ump-bot:
    build: .
    container_name: ump-telegram-bot
    restart: unless-stopped
    volumes:
      # Добавляем :Z для корректной работы SELinux при Podman bind-mount
      - ./var:/app/var:Z
      - ./out:/app/out:Z
      - ./src/ump_bot/data/parks.json:/app/src/ump_bot/data/parks.json:Z
      - ./src/ump_bot/data/vehicles.sample.txt:/app/src/ump_bot/data/vehicles.sample.txt:Z
      - ./.env:/app/.env:Z
    environment:
      - PYTHONUNBUFFERED=1
    # Ограничения ресурсов отключены из-за отсутствия CPU cgroup в rootless Podman.
    # При необходимости можно включить их в отдельном override-файле, запуская podman compose -f docker-compose.yml -f override.yml

